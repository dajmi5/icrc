<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data noupdate="0">
        <record id="group_genreg_user_standard" model="res.groups">
            <field name="name">Standard User</field>
            <field name="category_id" ref="module_genreg_category"/>
            <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
        </record>

        <record id="group_genreg_user_manager" model="res.groups">
            <field name="name">Register Manager</field>
            <field name="category_id" ref="module_genreg_category"/>
            <field name="implied_ids" eval="[(4, ref('group_genreg_user_standard'))]"/>
        </record>
        <!-- security -->

        <record id="genreg_register_editor_rule" model="ir.rule">
            <field name="name">Editor GRs - Read Only</field>
            <field ref="model_genreg_register" name="model_id"/>
            <field name="domain_force">[('sec_editor_group_ids', 'in', user.groups_id.ids)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="False"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="groups" eval="[(4, ref('group_genreg_user_standard'))]"/>
        </record>

        <record id="genreg_register_db_manager_rule" model="ir.rule">
            <field name="name">Manager GRs - Full Access</field>
            <field ref="model_genreg_register" name="model_id"/>
            <field name="domain_force">[('sec_manager_group_ids', 'in', user.groups_id.ids)]</field>
            <field name="perm_read" eval="True"/>
            <field name="perm_write" eval="True"/>
            <field name="perm_create" eval="False"/>
            <field name="perm_unlink" eval="False"/>
            <field name="groups" eval="[(4, ref('group_genreg_user_standard'))]"/>
        </record>

        <record id="genreg_register_global_manager_rule" model="ir.rule">
            <field name="name">Manager GRs</field>
            <field name="model_id" ref="model_genreg_register" />
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4, ref('genreg.group_genreg_user_manager'))]"/>
        </record>

        <record id="genreg_record_user_rule" model="ir.rule">
            <field name="name">User Records in Register</field>
            <field ref="model_genreg_record" name="model_id"/>
            <field name="domain_force">['|',
                ('doc_register_id.sec_editor_group_ids', 'in', user.groups_id.ids),
                ('doc_register_id.sec_manager_group_ids', 'in', user.groups_id.ids)]
            </field>
            <field name="groups" eval="[(4, ref('group_genreg_user_standard'))]"/>
        </record>

        <record id="genreg_record_manager_rule" model="ir.rule">
            <field name="name">Global Manager Record GRs</field>
            <field ref="model_genreg_record" name="model_id"/>
            <field name="domain_force">[(1,'=',1)]</field>
            <field name="groups" eval="[(4, ref('group_genreg_user_manager'))]"/>
        </record>
    </data>
</odoo>